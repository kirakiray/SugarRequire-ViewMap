!function(t){var n={},e={},r={paths:n,baseUrl:"",dataMap:e,tempM:{}},i="",a={config:function(t){r.baseUrl=t.baseUrl,x(n,t.paths)},use:function(t){var n=e[L(t)];return n&&n.status==h&&n.type==g?n.content.exports:void 0},has:function(t){var n=e[L(t)];return n?{status:n.status,type:n.type}:void 0},"delete":function(t){var n=L(t),r=e[n];r&&r.script.remove(),delete e[n]},extend:function(t){t(r,$,A,k)},error:function(t){console.log(t)},version:"2"},s=[],u=!1,o=document.getElementsByTagName("head")[0],c="firstRequireEnd",f="chainend",p="ready",v="allloadend",l="loading",h="done",d="error",_="succeed",g="define",m="defer",y=function(){},b=function(t){u||(u=!0,setTimeout(function(){for(var t=0;t<s.length;t++)s[t]();s=[],u=!1},0)),s.push(t)},E=function(t){return Object.prototype.toString.call(t).toLowerCase().replace(/(\[object )|(])/g,"")},w=Object.create||function(t){var n=y;return n.prototype=t,new n},q=function(t){return Array.prototype.slice.call(t)},M=function(){return[].forEach?function(t,n){return t.forEach(n)}:function(t,n){for(var e=0,r=t.length;r>e;e++)n(t[e],e)}}(),x=function(t,n){for(var e in n)t[e]=n[e];return t},j=function(t){return t=t.replace(/\?.+$/,""),t.replace(/.js$/g,"")},C=function(t){return t.concat(".js")},I=function(t){var n="",e=t.split("/"),r=e.length-1;return M(e,function(t,e){r>e&&(n+=t+"/")}),n},R=function(){this._map={},this.sub=[],this._ever={}};R.fn=R.prototype,R.fn._get=function(t){return this._map[t]||(this._map[t]={eves:[]})},R.fn.off=function(t,n){var e=this._get(t);if(arguments.length||(this._map=[]),t&&!n&&(this._map[t].eves=[]),t&&n){var r=[];M(e.eves,function(t){t._call!=n&&r.push(t)}),e.eves=r}};var S=function(t,n,e,r){if(t){var i={data:t.data,name:n};return 1==t.type?e(i,r):2==t.type&&b(function(){e(i,r)}),!0}return!1};R.fn.on=function(t,n,e){var r=this._get(t),i=S(this._ever[t],t,n,e);i||r.eves.push({data:e,_call:n})},R.fn.one=function(t,n,e){var r=this._get(t),i=S(this._ever[t],t,n,e);i||r.eves.push({one:!0,data:e,_call:n})},R.fn.trigger=function(t,n){var e=this._get(t),r=e._first;r&&r._call({data:n,name:t},r.data);var i=[];M(e.eves,function(e){e._call({data:n,name:t},e.data),e.one||i.push(e)}),e.eves=i;var a=this.sub;M(a,function(e){e.trigger(t,n)});var s=e._last;s&&s._call({data:n,name:t},s.data)},R.fn.ever=function(t,n,e){var r={};r=e?{type:1,data:n}:{type:2,data:n},this._ever[t]=r,this.trigger(t,n),this.off(t)},R.fn.first=function(t,n,e){var r=this._get(t);r._first={data:e,_call:n}},R.fn.last=function(t,n,e){var r=this._get(t);r._last={data:e,_call:n}},R.fn.clone=function(){var t=new R;return t._ever=w(this._ever),this.sub.push(t),t};var k=function(t){R.apply(this,arguments),this._cid=0,this._dMap=[],this._isInit=!1,this._isCreate=!1,this._ceName=t||f};k.fn=k.prototype=w(R.prototype),k.fn.create=function(){this._isCreate=!0;var t=this,n=this._cid++;return function(e){t._cid--,t._dMap[n]=e,t._isInit&&0==t._cid&&t.trigger(t._ceName,t._dMap)}},k.fn.init=function(){this._isInit=!0,this._isCreate&&0==this._cid&&this.trigger(this._ceName,this._dMap)};var A=function(t,n){n?(this._origin=n,this._rEvent=new R):(this._origin=this._rEvent=new k,this._origin.init());var e=this,r=this._origin.create();this._rEvent.last(p,function(){r()}),this._rEvent.on(p,function(t){e.ready.apply(this,t.data)}),this.doing(function(t){e.loading(t)}),this.fail(function(t){e.error(t)}),this.pub={},this._urls=t,this._subRequire=[]};A.fn=A.prototype,A.fn.ready=y,A.fn.error=y,A.fn.loading=y,A.fn.done=function(t){var n=this;return this._rEvent.on(p,function(e){t.apply(n,e.data)}),this},A.fn.doing=function(t){return this._rEvent.on(l,function(n){t(n.data)}),this},A.fn.fail=function(t){return this._rEvent.on(d,function(n){t(n.data)}),this},A.fn.post=function(t){return this.data=t,this},A.fn.hand=function(t){M(this._subRequire,function(n){n.data=t})},A.fn.require=function(){var t=q(arguments),n=new A(t,this._origin);return this._subRequire.push(n),n.pub=this.pub,n};var B=function(t){var n=document.createElement("script");return n.type="text/javascript",n.setAttribute("async",!0),n.src=t,n},N=function(t){var n=t.split(/\//g),e=[];return M(n,function(t){return".."==t&&e.length&&".."!=e.slice(-1)[0]?void e.pop():void e.push(t)}),e.join("/")},U=/^.\//,L=function(t,n){var e=U.test(t),a=t.split(U),s=t.match(/\?.+$/g)||[""];if(e){var u=n+C(j(a.slice(-1)[0]))+s[0];return u=u.replace(i,""),u=N(u)}var o=r.baseUrl,c=r.paths[t]||t;if(/.+:\/\//g.test(c))return c;var u=o?o.concat("/"+c):c;return C(j(u))+s[0]},$={setDefine:function(t){var n=r.tempM,e=E(n.value),i={exports:{}};switch(t.content=i,e){case"function":var a=!1,s=!1,u=new k(c),o=n.value.call({FILE:t.script.src},function(){a=!0;var n=$.require.apply($,arguments);if(n.pub._dir=I(t.script.src),!s){var e=u.create();n._rEvent.on(f,e)}return n},i.exports,i);s=!0,a?(u.init(),u.on(c,function(){t.status=h,t.event.ever(h,i.exports)})):(o&&(i.exports=o),t.status=h,t.event.ever(h,i.exports));break;default:t.status=h,i.exports=n.value,t.event.ever(h,n.value)}},deferBrain:function(t){var n=t.event.sub;M(n,function(n){t.content.call({FILE:t.script.src,data:n.data},function(){var n=$.require.apply($,arguments);return n.pub._dir=I(t.script.src),n},function(t){n.trigger(h,t)},function(t){n.trigger(d,t)})}),t.event.sub=[]},mProcess:function(t){var n=t.event,i=r.tempM;if(i){var a=i.name;switch(E(a)){case"array":M(a,function(n){e[n]=t});break;case"string":e[a]=t}}switch(i.type){case g:t.type=g,$.setDefine(t);break;case m:t.type=m,t.content=i.value,$.deferBrain(t);break;default:t.type="file",t.status=h,n.ever(h)}r.tempM={}},loadScript:function(t,n){var e=B(t);e.onload=function(){n({status:_,script:e})},e.onerror=function(){n({status:d,script:e})},b(function(){o.appendChild(e)})},scriptAgent:function(t){var n="";if(e[t]){n=e[t];var r=n.event;return n.type?n.type==m?(b(function(){$.deferBrain(n)}),r.clone()):r:r.clone()}var r=new R;return n=e[t]={status:"wait",event:r},$.loadScript(t,function(t){switch(x(n,t),r.ever(t.status),t.status){case _:$.mProcess(n)}}),r.last(h,function(){r.sub=[]}),r.clone()},groupScript:function(t,n){var e=new k(v),r=[],i=[],s=function(t,n,a,s,u){e.trigger(l,{id:t,sucess:r,total:n,errors:i,input:a,url:s,status:u})};return M(t,function(u,o){var c=L(u,n.pub._dir),f=$.scriptAgent(c,n);n.data&&(f.data=n.data);var p=e.create();f.one(h,function(n){var e=n.data;r.push(u),f.off(d),s(o,t,u,c,_),p(e)}),f.one(d,function(){i.push(u),f.off(h),s(o,t,u,c,d);var n={total:t,sucess:r,errors:i,id:o,input:u,url:c};e.trigger(d,n),a.error(n)})}),e.init(),e},splitter:function(t){var n=t._urls,e=$.groupScript(n,t);e.on(v,function(n){t._rEvent.trigger(p,n.data),M(t._subRequire,function(t){$.splitter(t)})}),e.on(l,function(n){t._rEvent.trigger(l,n.data)}),e.on(d,function(n){t._rEvent.trigger(d,n.data)})},require:function(){var t=q(arguments),n=new A(t);return b(function(){$.splitter(n)}),n},define:function(t,n){r.tempM={type:g,value:t,name:n}},defer:function(t,n){r.tempM={type:m,value:t,name:n}}},D=t.sr;if(D){var F=D.config;F&&a.config(F);var O=D.ready;O&&O()}i=I(location.href);var P=function(){return $.require.apply($,arguments)},T=function(){return $.define.apply($,arguments)},z=function(){return $.defer.apply($,arguments)};a.require=P,a.define=T,a.defer=z,t.sr=a,!t.require&&(t.require=P),!t.define&&(t.define=T),!t.defer&&(t.defer=z)}(window);