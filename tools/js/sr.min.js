!function(t){var e={},n={},r={paths:e,baseUrl:"",dataMap:n,tempM:{}},i="",a={config:function(t){r.baseUrl=t.baseUrl,j(e,t.paths)},use:function(t){var e=n[$(t)];return e&&e.status==h&&e.type==_?e.content.exports:void 0},has:function(t){var e=n[$(t)];return e?{status:e.status,type:e.type}:void 0},"delete":function(t){var e=$(t),r=n[e];r&&r.script.remove(),delete n[e]},extend:function(t){t(r,D,B,A)},error:function(t){console.log(t)},version:"2"},s=[],u=!1,o=document.getElementsByTagName("head")[0],c="firstRequireEnd",f="chainend",p="ready",v="allloadend",l="loading",h="done",d="error",g="succeed",_="define",m="defer",y="adddely",b=function(){},E=function(t){u||(u=!0,setTimeout(function(){for(var t=0;t<s.length;t++)s[t]();s=[],u=!1},0)),s.push(t)},w=function(t){return Object.prototype.toString.call(t).toLowerCase().replace(/(\[object )|(])/g,"")},q=Object.create||function(t){var e=b;return e.prototype=t,new e},M=function(t){return Array.prototype.slice.call(t)},x=function(){return[].forEach?function(t,e){return t.forEach(e)}:function(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}}(),j=function(t,e){for(var n in e)t[n]=e[n];return t},C=function(t){return t=t.replace(/\?.+$/,""),t.replace(/.js$/g,"")},I=function(t){return t.concat(".js")},R=function(t){var e="",n=t.split("/"),r=n.length-1;return x(n,function(t,n){r>n&&(e+=t+"/")}),e},S=function(){this._map={},this.sub=[],this._ever={}};S.fn=S.prototype,S.fn._get=function(t){return this._map[t]||(this._map[t]={eves:[]})},S.fn.off=function(t,e){var n=this._get(t);if(arguments.length||(this._map=[]),t&&!e&&(this._map[t].eves=[]),t&&e){var r=[];x(n.eves,function(t){t._call!=e&&r.push(t)}),n.eves=r}};var k=function(t,e,n,r){if(t){var i={data:t.data,name:e};return 1==t.type?n(i,r):2==t.type&&E(function(){n(i,r)}),!0}return!1};S.fn.on=function(t,e,n){var r=this._get(t),i=k(this._ever[t],t,e,n);i||r.eves.push({data:n,_call:e})},S.fn.one=function(t,e,n){var r=this._get(t),i=k(this._ever[t],t,e,n);i||r.eves.push({one:!0,data:n,_call:e})},S.fn.trigger=function(t,e){var n=this._get(t),r=n._first;r&&r._call({data:e,name:t},r.data);var i=[];x(n.eves,function(n){n._call({data:e,name:t},n.data),n.one||i.push(n)}),n.eves=i;var a=this.sub;x(a,function(n){n.trigger(t,e)});var s=n._last;s&&s._call({data:e,name:t},s.data)},S.fn.ever=function(t,e,n){var r={};r=n?{type:1,data:e}:{type:2,data:e},this._ever[t]=r,this.trigger(t,e),this.off(t)},S.fn.first=function(t,e,n){var r=this._get(t);r._first={data:n,_call:e}},S.fn.last=function(t,e,n){var r=this._get(t);r._last={data:n,_call:e}},S.fn.clone=function(){var t=new S;return t._ever=q(this._ever),this.sub.push(t),t};var A=function(t){S.apply(this,arguments),this._cid=0,this._dMap=[],this._isInit=!1,this._isCreate=!1,this._ceName=t||f};A.fn=A.prototype=q(S.prototype),A.fn.create=function(){this._isCreate=!0;var t=this,e=this._cid++;return function(n){t._cid--,t._dMap[e]=n,t._isInit&&0==t._cid&&t.trigger(t._ceName,t._dMap)}},A.fn.init=function(){this._isInit=!0,this._isCreate&&0==this._cid&&this.trigger(this._ceName,this._dMap)};var B=function(t,e){e?(this._origin=e,this._rEvent=new S):(this._origin=this._rEvent=new A,this._origin.init());var n=this,r=this._origin.create();this._rEvent.last(p,function(){r()}),this._rEvent.on(p,function(t){n.ready.apply(this,t.data)}),this.doing(function(t){n.loading(t)}),this.fail(function(t){n.error(t)}),this.pub={},this._urls=t,this._subRequire=[]};B.fn=B.prototype,B.fn.ready=b,B.fn.error=b,B.fn.loading=b,B.fn.done=function(t){var e=this;return this._rEvent.on(p,function(n){t.apply(e,n.data)}),this},B.fn.doing=function(t){return this._rEvent.on(l,function(e){t(e.data)}),this},B.fn.fail=function(t){return this._rEvent.on(d,function(e){t(e.data)}),this},B.fn.post=function(t){return this.data=t,this},B.fn.hand=function(t){x(this._subRequire,function(e){e.data=t})},B.fn.require=function(){var t=M(arguments),e=new B(t,this._origin);return this._subRequire.push(e),e.pub=this.pub,e};var N=function(t){var e=document.createElement("script");return e.type="text/javascript",e.setAttribute("async",!0),e.src=t,e},U=function(t){var e=t.split(/\//g),n=[];return x(e,function(t){return".."==t&&n.length&&".."!=n.slice(-1)[0]?void n.pop():void n.push(t)}),n.join("/")},L=/^.\//,$=function(t,e){var n=L.test(t),a=t.split(L),s=t.match(/\?.+$/g)||[""];if(n){var u=e+I(C(a.slice(-1)[0]))+s[0];return u=u.replace(i,""),u=U(u)}var o=r.baseUrl,c=r.paths[t]||t;if(/.+:\/\//g.test(c))return c;var u=o?o.concat("/"+c):c;return I(C(u))+s[0]},D={setDefine:function(t,e){var n=r.tempM,i=w(n.value),a={exports:{}};switch(t.content=a,i){case"function":var s=!1,u=!1,o=new A(c),p=n.value.call({FILE:t.script.src},function(){s=!0;var n=D.require.apply(D,arguments);if(n.pub._par=t.script.src,e.trigger(y,n),!u){var r=o.create();n._rEvent.on(f,r)}return n},a.exports,a);u=!0,s?(o.init(),o.on(c,function(){t.status=h,t.event.ever(h,a.exports)})):(p&&(a.exports=p),t.status=h,t.event.ever(h,a.exports));break;default:t.status=h,a.exports=n.value,t.event.ever(h,n.value)}},deferBrain:function(t,e){var n=t.event.sub;x(n,function(n){t.content.call({FILE:t.script.src,data:n.data},function(){var n=D.require.apply(D,arguments);return n.pub._par=t.script.src,e.trigger(y,n),n},function(t){n.trigger(h,t)},function(t){n.trigger(d,t)})}),t.event.sub=[]},mProcess:function(t,e){var i=t.event,a=r.tempM;if(a){var s=a.name;switch(w(s)){case"array":x(s,function(e){n[e]=t});break;case"string":n[s]=t}}switch(a.type){case _:t.type=_,D.setDefine(t,e);break;case m:t.type=m,t.content=a.value,D.deferBrain(t,e);break;default:t.type="file",t.status=h,i.ever(h)}r.tempM={}},loadScript:function(t,e){var n=N(t);n.onload=function(){e({status:g,script:n})},n.onerror=function(){e({status:d,script:n})},E(function(){o.appendChild(n)})},scriptAgent:function(t){var e="";if(n[t]){e=n[t];var r=e.event,i=r.clone();return e.type==m?(E(function(){D.deferBrain(e,i)}),i):i}var r=new S,i=r.clone();return e=n[t]={status:"wait",event:r},D.loadScript(t,function(t){switch(j(e,t),r.ever(t.status),t.status){case g:D.mProcess(e,i)}}),r.last(h,function(){r.sub=[]}),i},groupScript:function(t,e){var n=new A(v),r=[],i=[],s=function(t,e,a,s,u){n.trigger(l,{id:t,sucess:r,total:e,errors:i,input:a,url:s,status:u})};return x(t,function(u,o){var c=e.pub._par,f=$(u,c&&R(c)),p=D.scriptAgent(f,e,u);e.data&&(p.data=e.data);var v=n.create();p.one(h,function(e){var n=e.data;r.push(u),p.off(d),s(o,t,u,f,g),v(n)}),p.one(d,function(){i.push(u),p.off(h),s(o,t,u,f,d);var e={total:t,sucess:r,errors:i,id:o,input:u,url:f};n.trigger(d,e),a.error(e)})}),n.init(),n},splitter:function(t){var e=t._urls,n=D.groupScript(e,t);n.on(v,function(e){t._rEvent.trigger(p,e.data),x(t._subRequire,function(t){D.splitter(t)})}),n.on(l,function(e){t._rEvent.trigger(l,e.data)}),n.on(d,function(e){t._rEvent.trigger(d,e.data)})},require:function(){var t=M(arguments),e=new B(t);return E(function(){D.splitter(e)}),e},define:function(t,e){r.tempM={type:_,value:t,name:e}},defer:function(t,e){r.tempM={type:m,value:t,name:e}}},F=t.sr;if(F){var O=F.config;O&&a.config(O);var P=F.ready;P&&E(P)}i=R(location.href);var T=function(){return D.require.apply(D,arguments)},z=function(){return D.define.apply(D,arguments)},G=function(){return D.defer.apply(D,arguments)};a.require=T,a.define=z,a.defer=G,t.sr=a,!t.require&&(t.require=T),!t.define&&(t.define=z),!t.defer&&(t.defer=G)}(window);